% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\PassOptionsToPackage{dvipsnames,svgnames,x11names}{xcolor}
%
\documentclass[
  letterpaper,
  DIV=11,
  numbers=noendperiod]{scrartcl}

\usepackage{amsmath,amssymb}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else  
    % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\setcounter{secnumdepth}{5}
% Make \paragraph and \subparagraph free-standing
\ifx\paragraph\undefined\else
  \let\oldparagraph\paragraph
  \renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
  \let\oldsubparagraph\subparagraph
  \renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi


\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
% definitions for citeproc citations
\NewDocumentCommand\citeproctext{}{}
\NewDocumentCommand\citeproc{mm}{%
  \begingroup\def\citeproctext{#2}\cite{#1}\endgroup}
\makeatletter
 % allow citations to break across lines
 \let\@cite@ofmt\@firstofone
 % avoid brackets around text for \cite:
 \def\@biblabel#1{}
 \def\@cite#1#2{{#1\if@tempswa , #2\fi}}
\makeatother
\newlength{\cslhangindent}
\setlength{\cslhangindent}{1.5em}
\newlength{\csllabelwidth}
\setlength{\csllabelwidth}{3em}
\newenvironment{CSLReferences}[2] % #1 hanging-indent, #2 entry-spacing
 {\begin{list}{}{%
  \setlength{\itemindent}{0pt}
  \setlength{\leftmargin}{0pt}
  \setlength{\parsep}{0pt}
  % turn on hanging indent if param 1 is 1
  \ifodd #1
   \setlength{\leftmargin}{\cslhangindent}
   \setlength{\itemindent}{-1\cslhangindent}
  \fi
  % set entry spacing
  \setlength{\itemsep}{#2\baselineskip}}}
 {\end{list}}
\usepackage{calc}
\newcommand{\CSLBlock}[1]{\hfill\break\parbox[t]{\linewidth}{\strut\ignorespaces#1\strut}}
\newcommand{\CSLLeftMargin}[1]{\parbox[t]{\csllabelwidth}{\strut#1\strut}}
\newcommand{\CSLRightInline}[1]{\parbox[t]{\linewidth - \csllabelwidth}{\strut#1\strut}}
\newcommand{\CSLIndent}[1]{\hspace{\cslhangindent}#1}

\usepackage{float}
\usepackage{tabularray}
\usepackage[normalem]{ulem}
\usepackage{graphicx}
\UseTblrLibrary{booktabs}
\UseTblrLibrary{siunitx}
\NewTableCommand{\tinytableDefineColor}[3]{\definecolor{#1}{#2}{#3}}
\newcommand{\tinytableTabularrayUnderline}[1]{\underline{#1}}
\newcommand{\tinytableTabularrayStrikeout}[1]{\sout{#1}}
\KOMAoption{captions}{tableheading}
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\AtBeginDocument{%
\ifdefined\contentsname
  \renewcommand*\contentsname{Table of contents}
\else
  \newcommand\contentsname{Table of contents}
\fi
\ifdefined\listfigurename
  \renewcommand*\listfigurename{List of Figures}
\else
  \newcommand\listfigurename{List of Figures}
\fi
\ifdefined\listtablename
  \renewcommand*\listtablename{List of Tables}
\else
  \newcommand\listtablename{List of Tables}
\fi
\ifdefined\figurename
  \renewcommand*\figurename{Figure}
\else
  \newcommand\figurename{Figure}
\fi
\ifdefined\tablename
  \renewcommand*\tablename{Table}
\else
  \newcommand\tablename{Table}
\fi
}
\@ifpackageloaded{float}{}{\usepackage{float}}
\floatstyle{ruled}
\@ifundefined{c@chapter}{\newfloat{codelisting}{h}{lop}}{\newfloat{codelisting}{h}{lop}[chapter]}
\floatname{codelisting}{Listing}
\newcommand*\listoflistings{\listof{codelisting}{List of Listings}}
\makeatother
\makeatletter
\makeatother
\makeatletter
\@ifpackageloaded{caption}{}{\usepackage{caption}}
\@ifpackageloaded{subcaption}{}{\usepackage{subcaption}}
\makeatother
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\usepackage{bookmark}

\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Forseeing the rest of the 2023 NFL season},
  pdfauthor={Janssen Myer Rambaud},
  colorlinks=true,
  linkcolor={blue},
  filecolor={Maroon},
  citecolor={Blue},
  urlcolor={Blue},
  pdfcreator={LaTeX via pandoc}}

\title{Forseeing the rest of the 2023 NFL season\thanks{Code and data
are available at: .}}
\usepackage{etoolbox}
\makeatletter
\providecommand{\subtitle}[1]{% add subtitle to \maketitle
  \apptocmd{\@title}{\par {\large #1 \par}}{}{}
}
\makeatother
\subtitle{Predicting each team's EPA}
\author{Janssen Myer Rambaud}
\date{April 4, 2024}

\begin{document}
\maketitle

\section{Introduction}\label{introduction}

This paper looks to predict how the rest of the 2023 NFL regular season
will play out after the halfway mark. Using the data collected from Week
1 up to Week 9, we aim to predict how the passing EPA will look for each
team until the regular season ends. Passing EPA, according to nflverse
is defined as the ``total expected points added on pass attempts and
sacks'' (Carl et al. 2023).

\section{Data}\label{sec-data}

This data was first collected through Carl et al. (2023), where it was
selected to retrieve recorded games by a QB in the 2023 season up to
week 9. Using R Core Team (2023), the package was downloaded, cleaned,
and fitted into a model with the help of Wickham et al. (2023), Firke
(2023), Wickham et al. (2019), Arel-Bundock (2022) and Kuhn and Wickham
(2020). Taking a look at the provided statistics from Carl et al.
(2023), the best analytics to predict passing EPA appeared to be:
completions, attempts, passing\_yards, passing\_yards\_after\_catch,
passing\_tds (passing touchdowns), and sacks, according the their
definition of EPA.

Completions are successful passes (caught) that did not hit the
ground/go out of bounds. Pass attempts are just any attempt at passing
the ball. Passing yards are the distance (in yards) the ball has covered
from where it was thrown to where it was caught. Passing yards after
catch are technically rushing yards, but as it is influenced by the
throw of the QB, it can remain here. Passing touchdowns are when the QB
passes the ball to a receiver at the endzone, scoring a point. Sacks are
when the QB are taken down by a defender prior to making a complete
pass.

\begin{verbatim}
# A tibble: 6 x 9
  recent_team passing_tds  week completions attempts passing_yards
  <chr>             <dbl> <dbl>       <dbl>    <dbl>         <dbl>
1 NYJ                   0     1           0        1             0
2 LA                    0     1          24       38           334
3 LA                    1     2          34       55           307
4 LA                    1     3          18       33           269
5 LA                    1     4          27       40           319
6 LA                    2     5          21       37           222
# i 3 more variables: passing_yards_after_catch <dbl>, sacks <dbl>,
#   passing_epa <dbl>
\end{verbatim}

\section{Model}\label{model}

The goal of our modelling strategy is to use every available metric that
involves the QB's passing, so in this case, passing yards after catch is
included, as well as sacks. This is enough to fit and hopefully predict
the future EPA for weeks 10-18.

\subsection{Model set-up}\label{model-set-up}

Define \(y_i\) as the passing EPA recorded for a QB for a game. Then the
rest of the factors are the important QB passing-influenced metrics as
described in the data section.

\[
\begin{aligned}
& y_i|\mu_i\sim \mbox{Normal}(\mu_i, \sigma)\\
\mu_i & = \beta_0+\beta_1 \times \mbox{completions}_i + \beta_2 \times \mbox{attempts}_i +\beta_3 \times \mbox{passing-tds}_i \\ + &\beta_4 \times \mbox{passing-yards}_i +\beta_5 \times \mbox{passing-yards-after-catch}_i +\beta_6 \times \mbox{sacks}_i
\end{aligned}
\]

\subsubsection{}\label{section}

\section{Results}\label{results}

Our results are summarized in Table~\ref{tbl-qb-model}.

\begin{table}

\caption{\label{tbl-qb-model}Predicted Passing EPA}

\centering{

\centering
\begin{tblr}[         %% tabularray outer open
]                     %% tabularray outer close
{                     %% tabularray inner open
colspec={Q[]Q[]},
column{1}={halign=l,},
column{2}={halign=c,},
hline{16}={1,2}{solid, 0.05em, black},
}                     %% tabularray inner close
\toprule
& (1) \\ \midrule %% TinyTableHeader
(Intercept)                     & \num{-1.080}  \\
& (\num{0.715}) \\
completions                     & \num{0.697}   \\
& (\num{0.115}) \\
attempts                        & \num{-0.982}  \\
& (\num{0.072}) \\
passing\_yards                 & \num{0.102}   \\
& (\num{0.008}) \\
passing\_yards\_after\_catch & \num{-0.023}  \\
& (\num{0.011}) \\
passing\_tds                   & \num{2.140}   \\
& (\num{0.344}) \\
sacks                           & \num{-2.151}  \\
& (\num{0.160}) \\
Num.Obs.                        & \num{318}     \\
R2                              & \num{0.776}   \\
R2 Adj.                         & \num{0.772}   \\
AIC                             & \num{1926.2}  \\
BIC                             & \num{1956.3}  \\
RMSE                            & \num{4.88}    \\
\bottomrule
\end{tblr}

}

\end{table}%

\begin{table}

\caption{\label{tbl-modelresults}Comparison of Model and Actual}

\centering{

}

\end{table}%

\newpage

\section*{References}\label{references}
\addcontentsline{toc}{section}{References}

\phantomsection\label{refs}
\begin{CSLReferences}{1}{0}
\bibitem[\citeproctext]{ref-citemodelsummary}
Arel-Bundock, Vincent. 2022. {``{modelsummary}: Data and Model Summaries
in {R}.''} \emph{Journal of Statistical Software} 103 (1): 1--23.
\url{https://doi.org/10.18637/jss.v103.i01}.

\bibitem[\citeproctext]{ref-citenflverse}
Carl, Sebastian, Ben Baldwin, Lee Sharpe, Tan Ho, and John Edwards.
2023. \emph{Nflverse: Easily Install and Load the 'Nflverse'}.
\url{https://nflverse.nflverse.com/}.

\bibitem[\citeproctext]{ref-citejanitor}
Firke, Sam. 2023. \emph{Janitor: Simple Tools for Examining and Cleaning
Dirty Data}. \url{https://github.com/sfirke/janitor}.

\bibitem[\citeproctext]{ref-citetidymodels}
Kuhn, Max, and Hadley Wickham. 2020. \emph{Tidymodels: A Collection of
Packages for Modeling and Machine Learning Using Tidyverse Principles.}
\url{https://www.tidymodels.org}.

\bibitem[\citeproctext]{ref-citeR}
R Core Team. 2023. \emph{R: A Language and Environment for Statistical
Computing}. Vienna, Austria: R Foundation for Statistical Computing.
\url{https://www.R-project.org/}.

\bibitem[\citeproctext]{ref-citetidyverse}
Wickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy
D'Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019.
{``Welcome to the {tidyverse}.''} \emph{Journal of Open Source Software}
4 (43): 1686. \url{https://doi.org/10.21105/joss.01686}.

\bibitem[\citeproctext]{ref-citedplyr}
Wickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis
Vaughan. 2023. \emph{Dplyr: A Grammar of Data Manipulation}.
\url{https://dplyr.tidyverse.org}.

\end{CSLReferences}



\end{document}
